{"version":3,"file":"main.js","sources":["js/render.js","js/view/abstract-view.js","js/header.js","js/view/game-view.js","js/game-data.js","js/game-screen.js","js/view/welcome-view.js","js/welcome-screen.js","js/main.js"],"sourcesContent":["const mainElement = document.querySelector(`.central`);\r\n\r\nexport const getElementFromTemplate = (template) => {\r\n  const wrapper = document.createElement(`div`);\r\n  wrapper.innerHTML = template.trim();\r\n  return wrapper;\r\n};\r\n\r\nexport const changeScreen = (element) => {\r\n  mainElement.innerHTML = ``;\r\n  mainElement.appendChild(element);\r\n};\r\n","import {getElementFromTemplate} from '../render';\r\n\r\nexport default class AbstractView {\r\n  constructor() {\r\n    if (new.target === AbstractView) {\r\n      throw new Error(`Can't instantiate AbstractView, only concrete one`);\r\n    }\r\n  }\r\n\r\n  get template() {\r\n    throw new Error(`Template is required`);\r\n  }\r\n\r\n  get element() {\r\n    if (this._element) {\r\n      return this._element;\r\n    }\r\n    this._element = this.render();\r\n    this.bind(this._element);\r\n    return this._element;\r\n  }\r\n\r\n  render() {\r\n    return getElementFromTemplate(this.template);\r\n  }\r\n\r\n  bind() {\r\n  }\r\n\r\n}\r\n","export default (state) => `<section class=\"game-page\">\r\n<header class=\"game-header\">\r\n  <a class=\"replay-link\" href=\"#\">Начать заново</a>\r\n  <p class=\"game-point\">Очки: ${state.score}</p>\r\n</header>`;\r\n\r\n","import AbstractView from './abstract-view';\r\nimport {getElementFromTemplate} from '../render';\r\nimport header from '../header';\r\n\r\nexport default class GameView extends AbstractView {\r\n  constructor(state) {\r\n    super();\r\n    this.state = state;\r\n  }\r\n\r\n  get template() {\r\n    return `<section class=\"game-page\">\r\n  <ul class=\"game-list\">\r\n    ${[...(this.state.scr)].map((i) => {\r\n    return `<li><img class=\"close visually-hidden\" src=\"img/closeCard.png\" width=\"110\" height=\"275\" alt=\"Закрытая карта\"><img class=\"open\" src=\"${i}\" width=\"110\" height=\"275\" alt=\"Карта\"></li>`;\r\n  }).join(``)}\r\n  </ul>\r\n  </section>`;\r\n  }\r\n\r\n  replayButtonClickHandler() {}\r\n\r\n  openCardClickHandler() {}\r\n\r\n  updateHeader() {}\r\n\r\n  bind() {\r\n    this.element.insertBefore(getElementFromTemplate(header(this.state)), this.element.firstChild);\r\n\r\n    const replayButton = this.element.querySelector(`.replay-link`);\r\n\r\n    replayButton.addEventListener(`click`, () => {\r\n      this.replayButtonClickHandler();\r\n    });\r\n\r\n    this.updateHeader = (somestate) => {\r\n      this.element.replaceChild(getElementFromTemplate(header(somestate)), this.element.firstChild);\r\n    };\r\n\r\n    this.element.querySelectorAll(`.close`).forEach((item) => {\r\n      item.addEventListener(`click`, (evt) => {\r\n        const chosenCard = evt.target;\r\n        this.openCardClickHandler(chosenCard);\r\n      });\r\n    });\r\n  }\r\n}\r\n\r\n","export const CARDS_COUNT = 18;\r\n\r\nconst getRandomFromInterval = function (min, max) {\r\n  return Math.floor(Math.random() * (max - min) + min);\r\n};\r\n\r\nconst getImgScr = ()=> {\r\n  const src = [];\r\n  for (let i = 0; i <= 8; i++) {\r\n    src.push(getRandomFromInterval(1, 52));\r\n  }\r\n  return src;\r\n};\r\n\r\nconst cardsNumber = getImgScr();\r\nexport const allcardsNumber = [...cardsNumber, ...cardsNumber];\r\n\r\nconst getCardsSrc = ()=> {\r\n  const imgSrc = [];\r\n  for (let i = 0; i < CARDS_COUNT; i++) {\r\n    imgSrc[i] = `img/${allcardsNumber[i]}.png`;\r\n  }\r\n  return imgSrc;\r\n};\r\n\r\nexport const initialState = {\r\n  score: 0,\r\n  time: 0,\r\n  scr: getCardsSrc()\r\n};\r\n\r\n","import {changeScreen} from './render';\r\nimport welcomeScreen from './welcome-screen';\r\nimport GameView from './view/game-view';\r\nimport {initialState} from './game-data';\r\n\r\nconst ONE_SECOND = 1000;\r\n\r\nexport default (state) => {\r\n\r\n  const screen = new GameView(state);\r\n\r\n  const tick = () => {\r\n    state.time++;\r\n  };\r\n\r\n  const stopTimer = ()=> {\r\n    clearTimeout(state.time);\r\n  };\r\n\r\n  const startTimer = () => {\r\n    state.time = setTimeout(() => {\r\n      tick();\r\n      startTimer();\r\n      if (state.time > 10) {\r\n        stopTimer();\r\n        document.querySelectorAll(`.close`).forEach((item) => {\r\n          item.classList.remove(`visually-hidden`);\r\n        });\r\n        document.querySelectorAll(`.open`).forEach((item) => {\r\n          item.classList.add(`visually-hidden`);\r\n        });\r\n      }\r\n    }, ONE_SECOND);\r\n  };\r\n\r\n  startTimer();\r\n\r\n  screen.openCardClickHandler = (card) => {\r\n    stopTimer();\r\n    card.classList.toggle(`visually-hidden`);\r\n    card.nextElementSibling.classList.toggle(`visually-hidden`);\r\n    card.parentElement.classList.toggle(`choose`);\r\n\r\n    let choosenCards = document.querySelectorAll(`.choose img:not(.visually-hidden):not(.hidden)`);\r\n    let newScore;\r\n    if (choosenCards && choosenCards.length) {\r\n      if ((choosenCards[0].src === choosenCards[1].src)) {\r\n        newScore = document.querySelectorAll(`.close`).length * 42;\r\n        choosenCards.forEach((item) => {\r\n          item.classList.add(`hidden`);\r\n        });\r\n      } else {\r\n        newScore = -84;\r\n        setTimeout(() =>{\r\n          choosenCards.forEach((item) => {\r\n            item.parentElement.classList.remove(`choose`);\r\n            item.classList.add(`visually-hidden`);\r\n            item.previousElementSibling.classList.remove(`visually-hidden`);\r\n          });\r\n        }, ONE_SECOND);\r\n      }\r\n    }\r\n    const newState = Object.assign({}, initialState, {score: state.score + newScore});\r\n    screen.updateHeader(newState);\r\n  };\r\n\r\n  screen.replayButtonClickHandler = () => {\r\n    stopTimer();\r\n    changeScreen(welcomeScreen(initialState));\r\n  };\r\n\r\n  return screen.element;\r\n};\r\n\r\n","import AbstractView from './abstract-view';\r\n\r\nexport default class WelcomeView extends AbstractView {\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  get template() {\r\n    return `<section class=\"start-page\">\r\n    <a class=\"start-img\" href=\"#\">\r\n      <img src=\"img/StartGame.png\" width=\"503\" height=\"262\" alt=\"Раскладка карт\">\r\n    </a>\r\n    <h2 class=\"start-title\">MEMORY GAME</h2>\r\n    <button class=\"start-button\" type=\"button\">Начать игру</button>  \r\n    </section>`;\r\n  }\r\n\r\n  startButtonClickHandler() {}\r\n\r\n  bind() {\r\n    const startButton = this.element.querySelector(`.start-button`);\r\n\r\n    startButton.addEventListener(`click`, () => {\r\n      this.startButtonClickHandler();\r\n    });\r\n\r\n  }\r\n}\r\n","import {changeScreen} from './render';\r\nimport gameScreen from './game-screen';\r\nimport {initialState} from './game-data';\r\nimport WelcomeView from './view/welcome-view';\r\n\r\nexport default (state) => {\r\n  const screen = new WelcomeView(state);\r\n\r\n  screen.startButtonClickHandler = () => {\r\n    changeScreen(gameScreen(initialState));\r\n  };\r\n\r\n  return screen.element;\r\n};\r\n\r\n","import {changeScreen} from './render';\r\nimport welcomeScreen from './welcome-screen';\r\n\r\nchangeScreen(welcomeScreen());\r\n"],"names":[],"mappings":";;;EAAA,MAAM,WAAW,GAAG,QAAQ,CAAC,aAAa,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;;AAEvD,EAAO,MAAM,sBAAsB,GAAG,CAAC,QAAQ,KAAK;EACpD,EAAE,MAAM,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;EAChD,EAAE,OAAO,CAAC,SAAS,GAAG,QAAQ,CAAC,IAAI,EAAE,CAAC;EACtC,EAAE,OAAO,OAAO,CAAC;EACjB,CAAC,CAAC;;AAEF,EAAO,MAAM,YAAY,GAAG,CAAC,OAAO,KAAK;EACzC,EAAE,WAAW,CAAC,SAAS,GAAG,CAAC,CAAC,CAAC;EAC7B,EAAE,WAAW,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;EACnC,CAAC,CAAC;;ECTa,MAAM,YAAY,CAAC;EAClC,EAAE,WAAW,GAAG;EAChB,IAAI,IAAI,GAAG,CAAC,MAAM,KAAK,YAAY,EAAE;EACrC,MAAM,MAAM,IAAI,KAAK,CAAC,CAAC,iDAAiD,CAAC,CAAC,CAAC;EAC3E,KAAK;EACL,GAAG;;EAEH,EAAE,IAAI,QAAQ,GAAG;EACjB,IAAI,MAAM,IAAI,KAAK,CAAC,CAAC,oBAAoB,CAAC,CAAC,CAAC;EAC5C,GAAG;;EAEH,EAAE,IAAI,OAAO,GAAG;EAChB,IAAI,IAAI,IAAI,CAAC,QAAQ,EAAE;EACvB,MAAM,OAAO,IAAI,CAAC,QAAQ,CAAC;EAC3B,KAAK;EACL,IAAI,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC;EAClC,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;EAC7B,IAAI,OAAO,IAAI,CAAC,QAAQ,CAAC;EACzB,GAAG;;EAEH,EAAE,MAAM,GAAG;EACX,IAAI,OAAO,sBAAsB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;EACjD,GAAG;;EAEH,EAAE,IAAI,GAAG;EACT,GAAG;;EAEH,CAAC;;AC7BD,eAAe,CAAC,KAAK,KAAK,CAAC;;;8BAGG,EAAE,KAAK,CAAC,KAAK,CAAC;SACnC,CAAC,CAAC;;ECAI,MAAM,QAAQ,SAAS,YAAY,CAAC;EACnD,EAAE,WAAW,CAAC,KAAK,EAAE;EACrB,IAAI,KAAK,EAAE,CAAC;EACZ,IAAI,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;EACvB,GAAG;;EAEH,EAAE,IAAI,QAAQ,GAAG;EACjB,IAAI,OAAO,CAAC;;IAER,EAAE,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK;IACnC,OAAO,CAAC,oIAAoI,EAAE,CAAC,CAAC,4CAA4C,CAAC,CAAC;GAC/L,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;;YAEF,CAAC,CAAC;EACd,GAAG;;EAEH,EAAE,wBAAwB,GAAG,EAAE;;EAE/B,EAAE,oBAAoB,GAAG,EAAE;;EAE3B,EAAE,YAAY,GAAG,EAAE;;EAEnB,EAAE,IAAI,GAAG;EACT,IAAI,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,sBAAsB,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;;EAEnG,IAAI,MAAM,YAAY,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;;EAEpE,IAAI,YAAY,CAAC,gBAAgB,CAAC,CAAC,KAAK,CAAC,EAAE,MAAM;EACjD,MAAM,IAAI,CAAC,wBAAwB,EAAE,CAAC;EACtC,KAAK,CAAC,CAAC;;EAEP,IAAI,IAAI,CAAC,YAAY,GAAG,CAAC,SAAS,KAAK;EACvC,MAAM,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,sBAAsB,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;EACpG,KAAK,CAAC;;EAEN,IAAI,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,IAAI,KAAK;EAC9D,MAAM,IAAI,CAAC,gBAAgB,CAAC,CAAC,KAAK,CAAC,EAAE,CAAC,GAAG,KAAK;EAC9C,QAAQ,MAAM,UAAU,GAAG,GAAG,CAAC,MAAM,CAAC;EACtC,QAAQ,IAAI,CAAC,oBAAoB,CAAC,UAAU,CAAC,CAAC;EAC9C,OAAO,CAAC,CAAC;EACT,KAAK,CAAC,CAAC;EACP,GAAG;EACH,CAAC;;EC9CM,MAAM,WAAW,GAAG,EAAE,CAAC;;EAE9B,MAAM,qBAAqB,GAAG,UAAU,GAAG,EAAE,GAAG,EAAE;EAClD,EAAE,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,GAAG,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,CAAC;EACvD,CAAC,CAAC;;EAEF,MAAM,SAAS,GAAG,KAAK;EACvB,EAAE,MAAM,GAAG,GAAG,EAAE,CAAC;EACjB,EAAE,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE;EAC/B,IAAI,GAAG,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;EAC3C,GAAG;EACH,EAAE,OAAO,GAAG,CAAC;EACb,CAAC,CAAC;;EAEF,MAAM,WAAW,GAAG,SAAS,EAAE,CAAC;AAChC,EAAO,MAAM,cAAc,GAAG,CAAC,GAAG,WAAW,EAAE,GAAG,WAAW,CAAC,CAAC;;EAE/D,MAAM,WAAW,GAAG,KAAK;EACzB,EAAE,MAAM,MAAM,GAAG,EAAE,CAAC;EACpB,EAAE,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,WAAW,EAAE,CAAC,EAAE,EAAE;EACxC,IAAI,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,EAAE,cAAc,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;EAC/C,GAAG;EACH,EAAE,OAAO,MAAM,CAAC;EAChB,CAAC,CAAC;;AAEF,EAAO,MAAM,YAAY,GAAG;EAC5B,EAAE,KAAK,EAAE,CAAC;EACV,EAAE,IAAI,EAAE,CAAC;EACT,EAAE,GAAG,EAAE,WAAW,EAAE;EACpB,CAAC,CAAC;;ECxBF,MAAM,UAAU,GAAG,IAAI,CAAC;;AAExB,mBAAe,CAAC,KAAK,KAAK;;EAE1B,EAAE,MAAM,MAAM,GAAG,IAAI,QAAQ,CAAC,KAAK,CAAC,CAAC;;EAErC,EAAE,MAAM,IAAI,GAAG,MAAM;EACrB,IAAI,KAAK,CAAC,IAAI,EAAE,CAAC;EACjB,GAAG,CAAC;;EAEJ,EAAE,MAAM,SAAS,GAAG,KAAK;EACzB,IAAI,YAAY,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;EAC7B,GAAG,CAAC;;EAEJ,EAAE,MAAM,UAAU,GAAG,MAAM;EAC3B,IAAI,KAAK,CAAC,IAAI,GAAG,UAAU,CAAC,MAAM;EAClC,MAAM,IAAI,EAAE,CAAC;EACb,MAAM,UAAU,EAAE,CAAC;EACnB,MAAM,IAAI,KAAK,CAAC,IAAI,GAAG,EAAE,EAAE;EAC3B,QAAQ,SAAS,EAAE,CAAC;EACpB,QAAQ,QAAQ,CAAC,gBAAgB,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,IAAI,KAAK;EAC9D,UAAU,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC;EACnD,SAAS,CAAC,CAAC;EACX,QAAQ,QAAQ,CAAC,gBAAgB,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,IAAI,KAAK;EAC7D,UAAU,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC;EAChD,SAAS,CAAC,CAAC;EACX,OAAO;EACP,KAAK,EAAE,UAAU,CAAC,CAAC;EACnB,GAAG,CAAC;;EAEJ,EAAE,UAAU,EAAE,CAAC;;EAEf,EAAE,MAAM,CAAC,oBAAoB,GAAG,CAAC,IAAI,KAAK;EAC1C,IAAI,SAAS,EAAE,CAAC;EAChB,IAAI,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC;EAC7C,IAAI,IAAI,CAAC,kBAAkB,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC;EAChE,IAAI,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;;EAElD,IAAI,IAAI,YAAY,GAAG,QAAQ,CAAC,gBAAgB,CAAC,CAAC,8CAA8C,CAAC,CAAC,CAAC;EACnG,IAAI,IAAI,QAAQ,CAAC;EACjB,IAAI,IAAI,YAAY,IAAI,YAAY,CAAC,MAAM,EAAE;EAC7C,MAAM,KAAK,YAAY,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,YAAY,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG;EACzD,QAAQ,QAAQ,GAAG,QAAQ,CAAC,gBAAgB,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,MAAM,GAAG,EAAE,CAAC;EACnE,QAAQ,YAAY,CAAC,OAAO,CAAC,CAAC,IAAI,KAAK;EACvC,UAAU,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;EACvC,SAAS,CAAC,CAAC;EACX,OAAO,MAAM;EACb,QAAQ,QAAQ,GAAG,CAAC,EAAE,CAAC;EACvB,QAAQ,UAAU,CAAC,KAAK;EACxB,UAAU,YAAY,CAAC,OAAO,CAAC,CAAC,IAAI,KAAK;EACzC,YAAY,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;EAC1D,YAAY,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC;EAClD,YAAY,IAAI,CAAC,sBAAsB,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC;EAC5E,WAAW,CAAC,CAAC;EACb,SAAS,EAAE,UAAU,CAAC,CAAC;EACvB,OAAO;EACP,KAAK;EACL,IAAI,MAAM,QAAQ,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,YAAY,EAAE,CAAC,KAAK,EAAE,KAAK,CAAC,KAAK,GAAG,QAAQ,CAAC,CAAC,CAAC;EACtF,IAAI,MAAM,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;EAClC,GAAG,CAAC;;EAEJ,EAAE,MAAM,CAAC,wBAAwB,GAAG,MAAM;EAC1C,IAAI,SAAS,EAAE,CAAC;EAChB,IAAI,YAAY,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC,CAAC;EAC9C,GAAG,CAAC;;EAEJ,EAAE,OAAO,MAAM,CAAC,OAAO,CAAC;EACxB,CAAC,CAAC;;ECtEa,MAAM,WAAW,SAAS,YAAY,CAAC;EACtD,EAAE,WAAW,GAAG;EAChB,IAAI,KAAK,EAAE,CAAC;EACZ,GAAG;;EAEH,EAAE,IAAI,QAAQ,GAAG;EACjB,IAAI,OAAO,CAAC;;;;;;cAME,CAAC,CAAC;EAChB,GAAG;;EAEH,EAAE,uBAAuB,GAAG,EAAE;;EAE9B,EAAE,IAAI,GAAG;EACT,IAAI,MAAM,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC;;EAEpE,IAAI,WAAW,CAAC,gBAAgB,CAAC,CAAC,KAAK,CAAC,EAAE,MAAM;EAChD,MAAM,IAAI,CAAC,uBAAuB,EAAE,CAAC;EACrC,KAAK,CAAC,CAAC;;EAEP,GAAG;EACH,CAAC;;ACtBD,sBAAe,CAAC,KAAK,KAAK;EAC1B,EAAE,MAAM,MAAM,GAAG,IAAI,WAAW,CAAC,KAAK,CAAC,CAAC;;EAExC,EAAE,MAAM,CAAC,uBAAuB,GAAG,MAAM;EACzC,IAAI,YAAY,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC,CAAC;EAC3C,GAAG,CAAC;;EAEJ,EAAE,OAAO,MAAM,CAAC,OAAO,CAAC;EACxB,CAAC,CAAC;;ECVF,YAAY,CAAC,aAAa,EAAE,CAAC,CAAC;;;;"}
{"version":3,"file":"main.js","sources":["js/render.js","js/view/abstract-view.js","js/header.js","js/view/game-view.js","js/game-data.js","js/game-screen.js","js/view/welcome-view.js","js/welcome-screen.js","js/main.js"],"sourcesContent":["const mainElement = document.querySelector(`.central`);\n\nexport const getElementFromTemplate = (template) => {\n  const wrapper = document.createElement(`div`);\n  wrapper.innerHTML = template.trim();\n  return wrapper;\n};\n\nexport const changeScreen = (element) => {\n  mainElement.innerHTML = ``;\n  mainElement.appendChild(element);\n};\n","import {getElementFromTemplate} from '../render';\n\nexport default class AbstractView {\n  constructor() {\n    if (new.target === AbstractView) {\n      throw new Error(`Can't instantiate AbstractView, only concrete one`);\n    }\n  }\n\n  get template() {\n    throw new Error(`Template is required`);\n  }\n\n  get element() {\n    if (this._element) {\n      return this._element;\n    }\n    this._element = this.render();\n    this.bind(this._element);\n    return this._element;\n  }\n\n  render() {\n    return getElementFromTemplate(this.template);\n  }\n\n  bind() {\n  }\n\n}\n","export default (state) => `<section class=\"game-page\">\n<header class=\"game-header\">\n  <a class=\"replay-link\" href=\"#\">Начать заново</a>\n  <p class=\"game-point\">Очки: ${state.score}</p>\n</header>`;\n\n","import AbstractView from './abstract-view';\nimport {getElementFromTemplate} from '../render';\nimport header from '../header';\n\nexport default class GameView extends AbstractView {\n  constructor(state) {\n    super();\n    this.state = state;\n  }\n\n  get template() {\n    return `<section class=\"game-page\">\n  <ul class=\"game-list\">\n    ${[...(this.state.scr)].map((i) => {\n    return `<li><img class=\"close visually-hidden\" src=\"img/closeCard.png\" width=\"110\" height=\"275\" alt=\"Закрытая карта\"><img class=\"open\" src=\"${i}\" width=\"110\" height=\"275\" alt=\"Карта\"></li>`;\n  }).join(``)}\n  </ul>\n  </section>`;\n  }\n\n  replayButtonClickHandler() {}\n\n  openCardClickHandler() {}\n\n  updateHeader() {}\n\n  bind() {\n    this.element.insertBefore(getElementFromTemplate(header(this.state)), this.element.firstChild);\n\n    const replayButton = this.element.querySelector(`.replay-link`);\n\n    replayButton.addEventListener(`click`, () => {\n      this.replayButtonClickHandler();\n    });\n\n    this.updateHeader = (somestate) => {\n      this.element.replaceChild(getElementFromTemplate(header(somestate)), this.element.firstChild);\n    };\n\n    this.element.querySelectorAll(`.close`).forEach((item) => {\n      item.addEventListener(`click`, (evt) => {\n        const chosenCard = evt.target;\n        this.openCardClickHandler(chosenCard);\n      });\n    });\n  }\n}\n\n","export const CARDS_COUNT = 18;\n\nconst getRandomFromInterval = function (min, max) {\n  return Math.floor(Math.random() * (max - min) + min);\n};\n\nconst getImgScr = ()=> {\n  const src = [];\n  for (let i = 0; i <= 8; i++) {\n    src.push(getRandomFromInterval(1, 52));\n  }\n  return src;\n};\n\nconst cardsNumber = getImgScr();\nexport const allcardsNumber = [...cardsNumber, ...cardsNumber];\n\nconst getCardsSrc = ()=> {\n  const imgSrc = [];\n  for (let i = 0; i < CARDS_COUNT; i++) {\n    imgSrc[i] = `img/${allcardsNumber[i]}.png`;\n  }\n  return imgSrc;\n};\n\nexport const initialState = {\n  score: 0,\n  time: 0,\n  scr: getCardsSrc()\n};\n\n","import {changeScreen} from './render';\nimport welcomeScreen from './welcome-screen';\nimport GameView from './view/game-view';\nimport {initialState} from './game-data';\n\nconst ONE_SECOND = 1000;\n\nexport default (state) => {\n\n  const screen = new GameView(state);\n\n  const tick = () => {\n    state.time++;\n  };\n\n  const stopTimer = ()=> {\n    clearTimeout(state.time);\n  };\n\n  const startTimer = () => {\n    state.time = setTimeout(() => {\n      tick();\n      startTimer();\n      if (state.time > 10) {\n        stopTimer();\n        document.querySelectorAll(`.close`).forEach((item) => {\n          item.classList.remove(`visually-hidden`);\n        });\n        document.querySelectorAll(`.open`).forEach((item) => {\n          item.classList.add(`visually-hidden`);\n        });\n      }\n    }, ONE_SECOND);\n  };\n\n  startTimer();\n\n  screen.openCardClickHandler = (card) => {\n    stopTimer();\n    card.classList.toggle(`visually-hidden`);\n    card.nextElementSibling.classList.toggle(`visually-hidden`);\n    card.parentElement.classList.toggle(`choose`);\n\n    let choosenCards = document.querySelectorAll(`.choose img:not(.visually-hidden):not(.hidden)`);\n    let newScore;\n    if (choosenCards && choosenCards.length) {\n      if ((choosenCards[0].src === choosenCards[1].src)) {\n        newScore = document.querySelectorAll(`.close`).length * 42;\n        choosenCards.forEach((item) => {\n          item.classList.add(`hidden`);\n        });\n      } else {\n        newScore = -84;\n        setTimeout(() =>{\n          choosenCards.forEach((item) => {\n            item.parentElement.classList.remove(`choose`);\n            item.classList.add(`visually-hidden`);\n            item.previousElementSibling.classList.remove(`visually-hidden`);\n          });\n        }, ONE_SECOND);\n      }\n    }\n    const newState = Object.assign({}, initialState, {score: state.score + newScore});\n    screen.updateHeader(newState);\n  };\n\n  screen.replayButtonClickHandler = () => {\n    stopTimer();\n    changeScreen(welcomeScreen(initialState));\n  };\n\n  return screen.element;\n};\n\n","import AbstractView from './abstract-view';\n\nexport default class WelcomeView extends AbstractView {\n  constructor() {\n    super();\n  }\n\n  get template() {\n    return `<section class=\"start-page\">\n    <a class=\"start-img\" href=\"#\">\n      <img src=\"img/StartGame.png\" width=\"503\" height=\"262\" alt=\"Раскладка карт\">\n    </a>\n    <h2 class=\"start-title\">MEMORY GAME</h2>\n    <button class=\"start-button\" type=\"button\">Начать игру</button>  \n    </section>`;\n  }\n\n  startButtonClickHandler() {}\n\n  bind() {\n    const startButton = this.element.querySelector(`.start-button`);\n\n    startButton.addEventListener(`click`, () => {\n      this.startButtonClickHandler();\n    });\n\n  }\n}\n","import {changeScreen} from './render';\nimport gameScreen from './game-screen';\nimport {initialState} from './game-data';\nimport WelcomeView from './view/welcome-view';\n\nexport default (state) => {\n  const screen = new WelcomeView(state);\n\n  screen.startButtonClickHandler = () => {\n    changeScreen(gameScreen(initialState));\n  };\n\n  return screen.element;\n};\n\n","import {changeScreen} from './render';\nimport welcomeScreen from './welcome-screen';\n\nchangeScreen(welcomeScreen());\n"],"names":[],"mappings":"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"}